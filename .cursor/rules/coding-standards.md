# 程式撰寫規範

## 1. 通用規範

### 1.1 命名規範

- 使用有意義的描述性名稱
- 避免使用縮寫（除非是普遍接受的縮寫）
- 使用英文命名，避免使用拼音或其他語言
- 遵循以下命名規則：
  - 類名：PascalCase
  - 變量和函數：camelCase
  - 常量：UPPER_SNAKE_CASE
  - 私有成員：以下劃線開頭，如 `_privateVar`

### 1.2 註釋規範

- 所有的公共 API 都應該有文檔註釋
- 複雜的邏輯應該有適當的註釋說明
- 註釋應該說明「為什麼」而不是「是什麼」
- 使用 JSDoc 格式撰寫文檔註釋
- 及時更新註釋，確保註釋與代碼保持同步

### 1.3 代碼格式化

- 使用 ESLint 和 Prettier 進行代碼格式化
- 縮進使用 2 個空格
- 行尾不留空格
- 文件結尾留一個空行
- 最大行長度為 100 字符

## 2. TypeScript 規範

### 2.1 類型定義

- 優先使用介面（interface）而不是類型別名（type）
- 明確定義所有參數和返回值的類型
- 避免使用 `any` 類型，優先使用 `unknown`
- 使用精確的類型，避免過度泛化
- 對於可選參數，使用可選屬性而不是聯合類型

### 2.2 代碼組織

- 相關的類型定義應該放在一起
- 導出的類型應該放在文件頂部
- 使用命名空間組織相關的類型
- 避免循環依賴

### 2.3 最佳實踐

- 使用 `readonly` 標記不可變屬性
- 使用 `const` 聲明常量
- 使用 `enum` 定義常量集合
- 使用泛型增加代碼重用性
- 使用類型守衛進行類型檢查

## 3. NestJS 規範

### 3.1 模組組織

- 每個功能模組應該是獨立的
- 使用適當的裝飾器標記類
- 遵循依賴注入原則
- 使用適當的作用域（Scope）
- 正確處理異步操作

### 3.2 控制器規範

- 控制器只處理 HTTP 請求和響應
- 使用 DTO 驗證請求數據
- 使用管道進行數據轉換
- 使用守衛進行認證和授權
- 使用攔截器處理響應格式

### 3.3 服務規範

- 服務包含業務邏輯
- 遵循單一職責原則
- 使用依賴注入獲取其他服務
- 正確處理錯誤和異常
- 使用事務管理數據庫操作

## 4. Vue 3 規範

### 4.1 元件規範

- 使用 Composition API
- 元件名稱使用 PascalCase
- Props 定義要明確類型和默認值
- 使用 `defineProps` 和 `defineEmits`
- 避免使用 `this`

### 4.2 模板規範

- 使用 `v-bind` 綁定動態屬性
- 使用 `v-on` 處理事件
- 避免在模板中使用複雜的表達式
- 使用計算屬性處理複雜邏輯
- 使用具名插槽進行內容分發

### 4.3 狀態管理

- 使用 Pinia 進行狀態管理
- Store 按功能模組組織
- 使用 actions 處理異步操作
- 使用 getters 處理派生狀態
- 避免直接修改狀態

## 5. 測試規範

### 5.1 單元測試

- 使用 Jest 進行測試
- 每個公共方法都應該有測試
- 測試應該獨立且可重複
- 使用 Mock 處理外部依賴
- 測試覆蓋率應達到 80% 以上

### 5.2 E2E 測試

- 使用 Cypress 進行測試
- 測試關鍵業務流程
- 模擬真實用戶操作
- 處理異步和等待
- 使用頁面對象模式組織測試

### 5.3 測試最佳實踐

- 遵循 AAA（Arrange-Act-Assert）模式
- 使用有意義的測試描述
- 避免測試實現細節
- 及時更新測試用例
- 定期運行所有測試
